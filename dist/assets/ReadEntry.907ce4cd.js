import{l as f,o as s,c as t,d as r,b as o,g as _,s as M,p as w,h as E,a as C,A as h,w as A,m as T,t as b,F as x,n as L,i as v,O as V}from"./main.8a2f4785.js";import{a as D}from"./api_client.f45c9317.js";import{M as S}from"./MenuBar.dca5e5a5.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const y={MEDIA_TYPE:{IMAGE:1,VIDEO:2}};const g=n=>(w("data-v-4efc8a6c"),n=n(),E(),n),B=["src"],N=["src"],O=g(()=>o("i",{class:"fas fa-times"},null,-1)),P=[O],R=g(()=>o("i",{class:"fas fa-arrow-alt-circle-right"},null,-1)),Y=[R],G=g(()=>o("i",{class:"fas fa-arrow-alt-circle-left"},null,-1)),H=[G],F={__name:"Media",props:["bind"],emits:["close"],setup(n,{emit:i}){const{bind:l}=n,a=f({position:l.position||0,isClosed:!1}),c=()=>{i("close"),document.removeEventListener("animationend",c)},u=()=>{a.isClosed=!0,document.addEventListener("animationend",c)};return(k,e)=>(s(),t("div",{class:M(`media-view ${a.isClosed?"fade-out":"fade-in"}`)},[n.bind.media[a.position].type===r(y).MEDIA_TYPE.IMAGE?(s(),t("img",{key:0,class:"content",src:n.bind.media[a.position].url},null,8,B)):(s(),t("video",{key:1,class:"content",src:n.bind.media[a.position].url,controls:"",controlsList:"nodownload"},null,8,N)),o("button",{class:"close",type:"button",onClick:u},P),n.bind.media[a.position+1]?(s(),t("button",{key:2,class:"right-arrow",type:"button",onClick:e[0]||(e[0]=p=>a.position++)},Y)):_("",!0),n.bind.media[a.position-1]?(s(),t("button",{key:3,class:"left-arrow",type:"button",onClick:e[1]||(e[1]=p=>a.position--)},H)):_("",!0)],2))}},U=I(F,[["__scopeId","data-v-4efc8a6c"]]);const m=n=>(w("data-v-2e4f92cb"),n=n(),E(),n),j={class:"public-entry"},z={key:0,class:"lock-view"},q=m(()=>o("i",{class:"fas fa-lock icon"},null,-1)),J={key:0,class:"message"},K={key:1,class:"message"},Q={key:2,class:"ui-button"},W=m(()=>o("i",{class:"fa fa-spinner fa-spin"},null,-1)),X=v("\xA0\xA0\u8A8D\u8A3C\u4E2D"),Z=[W,X],ss=v("\xA0"),ts=m(()=>o("i",{class:"fab fa-twitter"},null,-1)),es=v("\xA0\xA0Twitter\u3067\u30ED\u30B0\u30A4\u30F3"),os=[ss,ts,es],ns={key:4,class:"notice"},is={key:1,class:"entry-view"},as={class:"message-area"},cs={class:"user-info"},rs=["src"],ls=["href"],ds=["innerHTML"],_s={class:"media-area"},us=["onClick"],ps=["src"],ms=["src"],hs={key:2,class:"play-icon"},fs=m(()=>o("i",{class:"fas fa-play-circle"},null,-1)),ys=[fs],vs={__name:"ReadEntry",setup(n){const i=f({id:null,uuid:null,content:"",media:[],user:null,fetched:!1}),l=f({message:"",group:null}),a=C(),c=h.getStatus();h.redirectHandler();const u=async()=>{if(!c.progress)try{const e=await D.get(`/entries/${a.params.entryId}/public`);i.id=e.entry.id,i.uuid=e.entry.uuid,i.content=e.entry.content,i.user=e.entry.user,i.media=e.entry.media||[],i.fetched=!0}catch(e){l.message=e.message,l.group=e.group}};u(),A(()=>c.progress,u);const k=e=>{V.setView(U,{media:i.media,position:e})};return(e,p)=>(s(),t("div",j,[T(S,{class:"menu"}),i.fetched?(s(),t("div",is,[o("div",as,[o("div",cs,[o("img",{src:i.user.avatarUrl,class:"avatar"},null,8,rs),o("div",null,[o("p",null,b(i.user.name),1),o("a",{class:"twitter-link ui-link",href:`https://twitter.com/i/user/${i.user.twitterUid}`},"Twitter\u3078\u98DB\u3076",8,ls)])]),o("p",{class:"content ui-deep",innerHTML:i.content},null,8,ds),o("div",_s,[(s(!0),t(x,null,L(i.media,(d,$)=>(s(),t("div",{class:"col",key:d.id,onClick:gs=>k($)},[d.type===r(y).MEDIA_TYPE.IMAGE?(s(),t("img",{key:0,class:"col-content",src:d.url},null,8,ps)):(s(),t("video",{key:1,class:"col-content",src:d.url},null,8,ms)),d.type===r(y).MEDIA_TYPE.VIDEO?(s(),t("div",hs,ys)):_("",!0)],8,us))),128))])])])):(s(),t("div",z,[q,l.message?(s(),t("p",J,b(l.message),1)):(s(),t("p",K,"\u95B2\u89A7\u3067\u304D\u308B\u304B\u78BA\u8A8D\u4E2D\u3067\u3059...")),r(c).progress?(s(),t("button",Q,Z)):r(c).isLoggedIn?_("",!0):(s(),t("button",{key:3,class:"ui-button",onClick:p[0]||(p[0]=d=>r(h).login())},os)),r(c).isLoggedIn?_("",!0):(s(),t("p",ns,"\u203BTwitter\u9023\u643A\u304C\u5FC5\u9808\u3067\u3059\u3002\u30A2\u30AB\u30A6\u30F3\u30C8\u60C5\u5831\u306F\u30A2\u30AB\u30A6\u30F3\u30C8\u8A8D\u8A3C\u3068\u30D5\u30A9\u30ED\u30FC\u4E2D\u306E\u30E6\u30FC\u30B6\u30FC\u53D6\u5F97\u306B\u5229\u7528\u3057\u307E\u3059\u3002"))]))]))}},Is=I(vs,[["__scopeId","data-v-2e4f92cb"]]);export{Is as default};
